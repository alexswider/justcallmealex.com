function animateOut(e,a){switch(moveBg(a),e){case START_PAGE:TweenMax.to($("#faces-bg"),2,{x:"-=1500",ease:Expo.easeIn}),TweenMax.to($(".title-bar"),2,{ease:Expo.easeIn,autoAlpha:0}),TweenMax.to($("#movie-title"),2,{x:"-=800",delay:.5,ease:Expo.easeIn,autoAlpha:0}),TweenMax.to($("#tumblr-link"),1,{delay:.3,x:"-=300",autoAlpha:0,ease:Expo.easeIn}),TweenMax.to($("#watch-trailer"),1,{delay:.5,x:"-=300",autoAlpha:0,ease:Expo.easeIn}),TweenMax.to($(".links"),1,{delay:.6,x:"-=300",autoAlpha:0,ease:Expo.easeIn}),TweenMax.to($("#social-credits"),1,{autoAlpha:0,ease:Expo.easeIn}),TweenMax.to($("#start-btn"),2,{x:"-=800",delay:.5,ease:Expo.easeIn,autoAlpha:0}),TweenMax.to($("#plane"),2,{x:"-=80",y:"-=300",delay:1.5,ease:Expo.easeIn,autoAlpha:0,onComplete:function(){loadPartial(a)}});break;case MAP_PAGE:TweenMax.to($(".right-side #map"),1,{x:"-=50",delay:.4,ease:Expo.easeIn,autoAlpha:0}),TweenMax.to($(".right-side .start-btn"),1,{x:"-=50",delay:.6,ease:Expo.easeIn,autoAlpha:0}),TweenMax.to($(".left-side #description p"),2,{autoAlpha:0,ease:Expo.easeIn,onComplete:function(){loadPartial(a)}});break;case PICK_PAGE:TweenMax.to($(".right-side"),1.6,{x:"-=100",delay:.4,ease:Expo.easeIn,autoAlpha:0,onComplete:function(){loadPartial(a)}}),TweenMax.to($(".left-side .quote1"),2,{autoAlpha:0,ease:Expo.easeIn});break;case QUESTION_PAGE:TweenMax.to($(".right-side"),2,{x:"-=480",ease:Expo.easeIn,autoAlpha:0,onComplete:function(){loadPartial(a)}}),TweenMax.to($(".left-side"),2,{x:"-=480",delay:.4,autoAlpha:0,ease:Expo.easeIn});break;case SUBMIT_PAGE:TweenMax.to($(".left-side .submit-text"),2,{autoAlpha:0,ease:Expo.easeIn}),TweenMax.to($(".left-side #terms"),2,{autoAlpha:0,ease:Expo.easeIn,onComplete:function(){loadPartial(a)}});break;case FINISH_PAGE:TweenMax.to($(".right-side"),2,{x:"-=480",delay:.4,ease:Expo.easeIn,autoAlpha:0,onComplete:function(){loadPartial(a)}})}}function moveBg(e){switch(console.log("moveBg:to:"+e),e){case START_PAGE:console.log("twenBg"+e),TweenMax.to($("#container"),3,{backgroundPosition:"0px bottom",ease:Expo.easeOut});break;case PICK_PAGE:console.log("twenBg"+e),TweenMax.to($("#container"),4,{backgroundPosition:"-60px bottom"});break;case MAP_PAGE:console.log("twenBg"+e),TweenMax.to($("#container"),4,{backgroundPosition:"-120px bottom"});break;case QUESTION_PAGE:console.log("twenBg"+e),TweenMax.to($("#container"),4,{backgroundPosition:"-180px bottom"});break;case SUBMIT_PAGE:console.log("twenBg"+e),TweenMax.to($("#container"),4,{backgroundPosition:"-240px bottom"});break;case FINISH_PAGE:console.log("twenBg"+e),TweenMax.to($("#container"),4,{backgroundPosition:"-300px bottom"})}}function startAnim(){console.log("startAnim");var e=$(".faces-bg");$("#f1"),$("#f2"),$("#f3");TweenMax.from(e,3,{autoAlpha:0,ease:Expo.easeOut}),TweenMax.staggerFrom(".f",2,{x:"-=1150",delay:2.5,ease:Expo.easeOut,force3D:!0},.6);var a=$(".title-bar");TweenMax.from(a,2,{scaleY:.1,autoAlpha:0,delay:1,ease:Expo.easeOut});var o=$("#movie-title");TweenMax.from(o,2,{autoAlpha:0,delay:2.5,ease:Expo.easeOut}),$links=$(".links p, .mobile-links a > div"),TweenMax.staggerFrom($links,1,{autoAlpha:0,delay:5,ease:Expo.easeOut},.2),o=$("#start-btn"),TweenMax.from(o,2,{autoAlpha:0,delay:6,ease:Expo.easeOut,onComplete:function(){TweenMax.to(o,.8,{scale:1.2,yoyo:!0,ease:Bounce.easeOut}),TweenMax.to(o,.8,{delay:.8,scale:1,yoyo:!0,ease:Expo.easeOut})}}),$plane=$("#plane"),TweenMax.from($plane,6,{autoAlpha:0,delay:2,x:"-=800",y:"-=200",ease:Expo.easeOut,onComplete:function(){TweenMax.to($plane,1.8,{delay:1,y:"+=5",yoyo:!0,repeat:100})}})}function startChose(){console.log("start chose items"),TweenMax.from($(".right-side p"),2,{delay:2.5,autoAlpha:0,ease:Expo.easeOut}),TweenMax.from($(".title"),2,{delay:2.5,autoAlpha:0,ease:Expo.easeOut}),TweenMax.from($(".quote1"),2,{delay:3,autoAlpha:0,ease:Expo.easeOut,onStart:function(){for(var e=new SplitText(".quote1",{type:"words"}),a=new TimelineLite,o=e.words.length,t=0;o>t;t++)a.from(e.words[t],1,{force3D:!0,scale:Math.random()>.5?0:2,opacity:0},Math.random())}}),TweenMax.from($(".home-btn"),2,{delay:3,autoAlpha:0,ease:Expo.easeIOut})}function showMap(){console.log("showMap"),TweenMax.from($(".left-side "),2,{x:"+=50",autoAlpha:0,ease:Expo.easeOut}),TweenMax.from($(".right-side"),1,{delay:2.5,autoAlpha:0,ease:Expo.easeOut})}function showIcons(){console.log("showicons"),TweenMax.staggerFrom(".item",.2,{force3D:!0,scale:Math.random(),opacity:0},Math.random())}function showQuestion(){console.log("questions"),TweenMax.from($("#question .left-side p"),2,{autoAlpha:0,ease:Expo.easeIn}),TweenMax.from($(".left-side a"),2,{delay:2,autoAlpha:0,ease:Expo.easeIn}),TweenMax.from($(".right-side img"),1,{delay:2.5,autoAlpha:0,scale:.3,ease:Expo.easeOut}),TweenMax.from($(".right-side p"),2,{delay:3,autoAlpha:0,ease:Expo.easeOut}),TweenMax.staggerFrom($(".right-side #answers a"),2,{delay:4.5,autoAlpha:0,ease:Expo.easeOut},.2)}function showSubmit(){console.log("submit"),TweenMax.from($(".left-side "),2,{x:"+=200",autoAlpha:0,ease:Expo.easeIn}),TweenMax.from($(".right-side "),1,{delay:2.5,autoAlpha:0,scale:.3,ease:Expo.easeOut})}function showFinish(){console.log("show:Finish"),TweenMax.from($(".left-side "),2,{autoAlpha:0,ease:Expo.easeIn})}function showTumblr(){console.log("questions"),TweenMax.from($(".left-side"),2,{x:"+=200",autoAlpha:0,ease:Expo.easeIn})}function showTrailer(){console.log("show trailer"),TweenMax.from($("#trailer"),.6,{autoAlpha:0,ease:Expo.easeIn})}
var PARTIALS="partials/",START_PAGE=PARTIALS+"start.html",PICK_PAGE=PARTIALS+"pick.html",QUESTION_PAGE=PARTIALS+"question.html",FINISH_PAGE=PARTIALS+"finish.html",SUBMIT_PAGE=PARTIALS+"submit.html",TRAILER_PAGE=PARTIALS+"trailer.html",TUMBLR_PAGE=PARTIALS+"tumblr.html",MAP_PAGE=PARTIALS+"map.html",DATA="json/",ITEMS_URL=DATA+"questions.json",SCREENS=PARTIALS+"screens/",CORRECT_SCREEN=SCREENS+"correct.html",WRONG_SCREEN=SCREENS+"wrong.html",TIMER=!0,CURRENT_PAGE=PARTIALS+"start.html",$start=$("#start"),TOTAL_TIME=12e4,TIME_PENALTY=20,API_KEY="WbGUzXVywfKPysKYKVtRYB8LtC8gRiVUa03Gxf5kjfeqSIN2gc",API_URL="http://api.tumblr.com/v2/blog/huntforthewilderpeople",LIKE_IFRAME='<iframe scrolling="no" width="15" height="15" frameborder="0" class="like_toggle" allowtransparency="true"></iframe>',LIKE_IFRAME_URL="https://assets.tumblr.com/assets/html/like_iframe.html#name=demo&color=white";
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e;e=function(){function e(e,i){this.elem=e,this.$elem=t(e),this.options=i,this.metadata=this.$elem.data("plugin-options")}return e}(),e.prototype={defaults:{width:800,height:530,autoSize:!0,touchNav:!0,mouseNav:!0,prevnextNav:!0,prevnextAutoHide:!0,pagerNav:!0,startSlide:1,autoPlay:!0,delay:0,interval:3e3,repeat:!0,playReverse:!1,hoverPause:!0,captionAutoHide:!1,animationCssTransitions:!0,animationDuration:500,animationTimingFunction:"linear",prevButtonClass:"slide-prev",nextButtonClass:"slide-next",activeSlideClass:"es-active",slideCaptionClass:"es-caption",pagerClass:"es-pager"},init:function(){var e,i,a,n,o,s,l,d,r,c;return e=this,e.config=t.extend({},e.defaults,e.options,e.metadata),e.actionClick={action:!1,x:0,y:0},e.currClick={x:0,y:0},e.data=t.data(e),t.data(e,"currentSlide",e.config.playReverse&&1==e.config.startSlide?e.$elem.children().length-1:e.config.startSlide-1),t.data(e,"nextSlide",e.data.currentSlide),t.data(e,"totalslides",e.$elem.children().length),t.data(e,"browserEnginePrefix",e._getBrowserEnginePrefix()),t.data(e,"isPlaying",!1),t.data(e,"isAnimating",!1),t.data(e,"playPaused",!1),t.data(e,"justTouched",!1),t.data(e,"isMoving",!1),t.data(e,"width",e.config.width),e.$elem.addClass("slider"),e.$elem.css({position:"relative"}),e.$elem.wrapInner("<div class='slide-wrapper'>",e.$elem).children(),e.$elem.wrapInner("<div class='slide-container'>",t(".slide-wrapper",e.$elem)).children(),e.$elem.wrapInner("<div class='slide-dragcontainer'>",t(".slide-container",e.$elem)).children(),t(".slide-container",e.$elem).css({position:"relative"}),c=t(".slide-dragcontainer",e.$elem),d=t(".slide-wrapper",e.$elem),r=d.children(),e.config.prevnextNav&&(d.after("<div class='"+e.config.nextButtonClass+"'>"),d.after("<div class='"+e.config.prevButtonClass+"'>"),n=t("."+e.config.nextButtonClass,e.$elem),a=t("."+e.config.prevButtonClass,e.$elem),o=n.add(a),e.config.prevnextAutoHide&&(o.hide(),e.$elem.hover(function(){o.fadeIn("fast")},function(){o.fadeOut("fast")})),a.on("click",function(t){e.previous()}),n.on("click",function(t){e.next()}),a.on("touchstart",function(t){t.stopPropagation()}),n.on("touchstart",function(t){t.stopPropagation()})),e.config.pagerNav&&(e.$elem.append("<ul class='"+e.config.pagerClass+"'>"),r.each(function(){t("<li />").appendTo(t("."+e.config.pagerClass,e.$elem)).attr("rel",t(this).index()).on("click",function(){t.data(e,"nextSlide",parseInt(t(this).attr("rel"))),e._prepareslides(!0),e._slide(!0),e._manualInterference()})})),r.each(function(){s=t(this),l=s.data("plugin-slide-caption"),void 0!==l&&("IMG"==this.tagName?(s.wrap("<div>"),s.after("<div class='"+e.config.slideCaptionClass+"'>"),s.next().append(l)):(s.append("<div class='"+e.config.slideCaptionClass+"'>"),s.children().last().append(l)),e.config.captionAutoHide&&(t("."+e.config.slideCaptionClass,e.$elem).hide(),e.$elem.hover(function(){t("."+e.config.slideCaptionClass,e.$elem).fadeIn("fast")},function(){t("."+e.config.slideCaptionClass,e.$elem).fadeOut("fast")})))}),d.children().addClass("slide").css({position:"absolute",top:0,left:0,width:e.data.width,height:e.config.height,zIndex:0,display:"none",webkitBackfaceVisibility:"hidden"}),i=r.height(),d.css({position:"relative",left:0,height:i}),t(".slide-container",e.$elem).css({width:e.data.width,overflow:"hidden",height:i}),e.config.touchNav&&(c.on("touchstart",function(t){var i=t.originalEvent.touches[0];return t.preventDefault(),e._onMoveStart(i.pageX,i.pageY),e.actionClick.x=e.currClick.x=i.pageX,e.actionClick.y=e.currClick.y=i.pageY,e.actionClick.action=!0,t.stopPropagation()}),c.on("touchmove",function(t){var i=t.originalEvent.touches[0];return t.preventDefault(),e.actionClick.action=!1,e._onMove(i.pageX,i.pageY),e.currClick.x=i.pageX,e.currClick.y=i.pageY,t.stopPropagation()}),c.on("touchend",function(t){if(1==e.actionClick.action&&e.actionClick.x==e.currClick.x&&e.actionClick.y==e.currClick.y){var i=c.find("."+e.config.activeSlideClass+" a, a."+e.config.activeSlideClass).attr("href");void 0!=i&&""!=i&&(window.location=i)}return t.preventDefault(),e._onMoveEnd(),t.stopPropagation()})),e.config.mouseNav&&(c.css("cursor","pointer"),c.on("dragstart",function(t){return!1}),c.on("mousedown",function(i){return e._onMoveStart(i.clientX,i.clientY),e.actionClick.x=i.clientX,e.actionClick.y=i.clientY,e.actionClick.action=!1,t(window).attr("unselectable","on").on("selectstart",!1).css("user-select","none").css("UserSelect","none").css("MozUserSelect","none"),i.stopPropagation()}),t(window).on("mousemove",function(t){return e._onMove(t.clientX,t.clientY),t.stopPropagation()}),t(window).on("mouseup",function(i){return e._onMoveEnd(),e.actionClick.x==i.clientX&&e.actionClick.y==i.clientY&&(e.actionClick.action=!0),t(window).removeAttr("unselectable").unbind("selectstart").css("user-select",null).css("UserSelect",null).css("MozUserSelect",null),i.stopPropagation()}),c.on("mouseup",function(t){e.actionClick.x==t.clientX&&e.actionClick.y==t.clientY&&(e.actionClick.action=!0)}),c.on("click",function(t){1!=e.actionClick.action&&(t.stopPropagation(),t.preventDefault())})),e.config.autoSize&&(setTimeout(function(){e._resize()},50),t(window).resize(function(){return setTimeout(function(){e._resize()},50)})),e._prepareslides(),e.gotoSlide(e.data.currentSlide),e.config.autoPlay&&setTimeout(function(){e.start()},e.config.delay),this},previous:function(){var e,i;return e=this,t.data(e,"slideDirection","previous"),i=(e.data.nextSlide-1)%e.data.totalslides,!e.config.repeat&&e.data.nextSlide-1<0?void(e.config.playReverse&&(t.data(e,"playPaused",!0),e.stop())):(e.data.playPaused&&e.data.nextSlide-1>0&&(t.data(e,"playPaused",!1),e.start()),t.data(e,"nextSlide",i),this._slide())},next:function(){var e,i;return e=this,t.data(e,"slideDirection","next"),i=(e.data.nextSlide+1)%e.data.totalslides,!e.config.repeat&&e.data.nextSlide+1>e.data.totalslides-1?void(e.config.playReverse||(t.data(e,"playPaused",!0),e.stop())):(e.data.playPaused&&e.data.nextSlide+1<e.data.totalslides-1&&(t.data(e,"playPaused",!1),e.start()),t.data(e,"nextSlide",i),this._slide())},start:function(){var e,i,a;e=this,i=t(".slide-container",e.$elem),e.data.isPlaying&&e.data.playTimer&&clearInterval(e.data.playTimer),a=setInterval(function(){e.config.playReverse?e.previous():e.next()},e.config.interval),t.data(e,"playTimer",a),e.config.hoverPause&&(i.unbind(),i.hover(function(){return t.data(e,"playPaused",!0),e.stop()},function(){return t.data(e,"playPaused",!1),e.start()})),t.data(e,"isPlaying",!0)},stop:function(){var e,i;e=this,i=t(".slide-container",e.$elem),clearInterval(e.data.playTimer),t.data(e,"playTimer",null),e.config.hoverPause&&!e.data.playPaused&&i.unbind(),t.data(e,"isPlaying",!1)},gotoSlide:function(e){var i,a,n,o,s,l;i=this,t.data(i,"nextSlide",e%i.data.totalslides),a=e%i.data.totalslides,t.data(i,"currentSlide",a),n=t(".slide-wrapper",i.$elem),o=n.children(),s=n.children().eq(a),l=s.position().left,i._setActive(o,s),i.config.animationCssTransitions&&i.data.browserEnginePrefix?i._transition(-l,0):n.css("left",-l),i._alignSlides(l)},_manualInterference:function(){var t=this;t.data.isPlaying&&(t.stop(),t.start())},_prepareslides:function(e){var i,a,n,o,s,l;i=this,a=t(".slide-wrapper",i.$elem),n=a.children(),o=i.data.width,s=Math.floor(i.data.totalslides/2),l=0,n.each(function(){t(this).css({display:"block",left:o*l,zIndex:10}),l++,!e&&i.config.repeat&&l>s&&(l=i.data.totalslides%2?-s:-(s-1))})},_onMoveStart:function(e,i){var a=this;a.data.isMoving||t.data(a,"touchTime",Number(new Date)),t.data(a,"touchedX",e),t.data(a,"touchedY",i),t.data(a,"isMoving",!0),a.data.isPlaying&&(t.data(a,"playPaused",!0),a.stop())},_onMove:function(e,i){var a,n,o,s,l,d,r;a=this,a.data.isMoving&&(n=t(".slide-wrapper",a.$elem),t.data(a,"scrolling",Math.abs(e-a.data.touchedX)<Math.abs(i-a.data.touchedY)),a.data.scrolling||a.data.isAnimating||(o=n.children().eq(a.data.nextSlide),s=o.position().left,l=a.data.browserEnginePrefix.css,d=e-a.data.touchedX,r=.1*a.data.width,a.config.repeat||(a.data.currentSlide<=0&&-r>-d?d=r:a.data.currentSlide>=a.data.totalslides-1&&-d>r&&(d=-r)),a._transition(-s+d,0)))},_onMoveEnd:function(){var e,i,a,n,o,s,l;e=this,e.data.isMoving&&(i=t(".slide-wrapper",e.$elem),t.data(e,"justTouched",!0),a=i.children().eq(e.data.nextSlide),n=a.position().left,o=.5*e.data.width,s=.1*e.data.width,l=Number(new Date)-e.data.touchTime<250,!e.config.repeat&&(i.position().left<-n&&e.data.currentSlide>=e.data.totalslides-1||i.position().left>-n&&e.data.currentSlide<=0)?e._transition(-n,.15):i.position().left>-n+o||i.position().left>-n+s&&l?this.previous():i.position().left<-(n+o)||i.position().left<-(n+s)&&l?this.next():e._transition(-n,.15),e._alignSlides(n),t.data(e,"isMoving",!1),t.data(e,"justTouched",!1),e.data.playPaused&&e.start())},_alignSlides:function(e){var i,a,n,o,s,l,d,r,c,u,f;if(i=this,i.config.repeat)for(a=t(".slide-wrapper",i.$elem),n=a.children(),void 0===e&&(o=a.children().eq(i.data.nextSlide),e=o.position().left),e=Math.round(e,0),s=Math.ceil(i.data.totalslides/2),l=i.data.width,d=0,n.each(function(){var i=Math.round(t(this).position().left);i>Math.round(e-l)&&d++}),r=s-d,0>r&&(r=i.data.totalslides%2==0?r+1:r),c=0;c<Math.abs(r);c++)u=[].reduce.call(n,function(e,i){return t(e).offset().left<t(i).offset().left?e:i}),f=[].reduce.call(n,function(e,i){return t(e).offset().left>t(i).offset().left?e:i}),r>0?t(u).css("left",Math.round(t(f).position().left+l)):t(f).css("left",Math.round(t(u).position().left-l))},_slide:function(e){var i,a,n,o,s,l;i=this,a=i.data.nextSlide,n=t(".slide-wrapper",i.$elem),o=n.children(),s=n.children().eq(a),l=Math.round(s.position().left),i._setActive(o,s),e||i._alignSlides(l),t.data(i,"isAnimating",!0),i.config.animationCssTransitions&&i.data.browserEnginePrefix?(i._transition(-l,i.data.justTouched?.5:1),n.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){t.data(i,"currentSlide",a),n.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),e&&i._alignSlides(l)})):n.stop().animate({left:-l},i.config.animationDuration,function(){t.data(i,"currentSlide",a),t.data(i,"isAnimating",!1),t.data(i,"justTouched",!1)})},_transition:function(e,i){var a,n,o,s,l,d;a=this,n=t(".slide-wrapper",a.$elem),(void 0===i||0>i)&&(i=1),o=a.data.browserEnginePrefix.css,s=o+"Transform",l=o+"TransitionDuration",d=o+"TransitionTimingFunction",n[0].style[l]=a.config.animationDuration*i+"ms",n[0].style[d]=a.config.animationTimingFunction,n[0].style[s]="translateX("+e+"px)",n.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){t.data(a,"isAnimating",!1),t.data(a,"justTouched",!1),n.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd")})},_setActive:function(e,i){var a,n,o=this;a=o.config.activeSlideClass,e.removeClass(a),i.addClass(a),o.config.pagerNav&&(n=t("."+o.config.pagerClass,o.$elem),n.children().removeClass("act"),n.find("[rel="+i.index()+"]").addClass("act"))},_resize:function(){var e,i,a,n,o;e=this,e.data.isPlaying&&(t.data(e,"playPaused",!0),e.stop()),i=e.$elem.width(),a=e.config.height/e.config.width,n=i*a,t.data(e,"width",i),t(".slide",e.$elem).css({width:i,height:n}),o=t(".slide-wrapper",e.$elem).children().height(),t(".slide-wrapper",e.$elem).css({height:o}),t(".slide-container",e.$elem).css({width:i,height:o}),e.data.playPaused&&(t.data(e,"playPaused",!1),e.start()),e._prepareslides(),e.gotoSlide(e.data.currentSlide)},_getBrowserEnginePrefix:function(){var t,e,i;for(t="Transition",e=["Moz","Webkit","Khtml","O","ms"],i=0;i<e.length;){if("string"==typeof document.body.style[e[i]+t])return{css:e[i]};i++}return!1}},e.defaults=e.prototype.defaults,t.fn.excoloSlider=function(t){return this.each(function(){new e(this,t).init()})}});
function showScreen(e,n){$("body").prepend('<div id="screen"></div>');var o=Math.round(2*Math.random());console.log(o),e=e.split("."),$("#screen").load(e[0]+"-"+o+".html"),0!==n&&setTimeout(hideScreen,1e3*n)}function hideScreen(){$("body #screen").remove()}
function loadPartial(e){switch(e){case START_PAGE:$("#container").load(e,startAnim);break;case MAP_PAGE:$("#container").load(e,showMap);break;case PICK_PAGE:console.log("load: "+e),$("#container").load(e,startChose);break;case QUESTION_PAGE:$("#container").load(e,showQuestion);break;case TRAILER_PAGE:$("#container").load(e,showTrailer);break;case TUMBLR_PAGE:$("#container").load(e,showTumblr);break;case SUBMIT_PAGE:$("#container").load(e,showSubmit);break;case FINISH_PAGE:console.log("load: "+e),$("#container").load(e,showFinish)}CURRENT_PAGE=e}function shuffle(e){for(var t,n,a=e.length;0!==a;)n=Math.floor(Math.random()*a),a-=1,t=e[a],e[a]=e[n],e[n]=t;return e}function backHome(){loadPartial(START_PAGE),pickedQuestions=[],questions=void 0,currentQuestion=0,clearInterval(timer)}function startTimer(){$time=$("#current-time"),chances=100,unitTime=TOTAL_TIME/100,timeInterval(),console.log("Timer started!"),timer=setInterval(timeInterval,unitTime)}function continueTimer(){$time=$("#current-time")}function timeInterval(){1>chances&&(pauseTimer(),chances=1),TIMER===!0&&chances--,$time.html(chances+"%")}function pauseTimer(){clearInterval(timer)}function unpauseTimer(){timer=setInterval(timeInterval,unitTime)}function checkAnswer(e,t){switch(e){case"answer-0":e=0;break;case"answer-1":e=1;break;case"answer-2":e=2;break;default:return}e===t.correct?showScreen(CORRECT_SCREEN,4):(showScreen(WRONG_SCREEN,4),chances-=TIME_PENALTY),console.log(e),2>currentQuestion&&(currentQuestion++,loadPartial(QUESTION_PAGE))}function setCookie(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();document.cookie=e+"="+t+"; "+r}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}var pickedQuestions=[],questions,currentQuestion=0,chances,unitTime,timer,img;$(document).ready(function(){return"#tumblr"===window.location.hash?loadPartial(TUMBLR_PAGE):void(1!=getCookie("visited")?(loadPartial(TRAILER_PAGE),setCookie("visited",1,365)):loadPartial(START_PAGE))});
!function(){"use strict";function n(t){if(!(this instanceof n))return new n(t);if(!t)throw new Error("No DOM elements passed into Touche");return this.nodes=t,this}var t="ontouchstart"in window||"msmaxtouchpoints"in window.navigator;if(n.prototype.on=function(n,i){var o,e,r=this.nodes,s=r.length;if(t&&"click"===n&&(o=!0),e=function(n,t,i){var e,r=function(){!e&&(e=!0)&&i.apply(this,arguments)};n.addEventListener(t,r,!1),o&&n.addEventListener("touchend",r,!1)},s)for(;s--;)e(r[s],n,i);else e(r,n,i);return this},window.Touche=n,window.jQuery&&t){var i=jQuery.fn.on;jQuery.fn.on=function(){var n=arguments[0];return arguments[0]="click"===n?"touchend":n,i.apply(this,arguments),this}}}();
function loadPosts(t,a){getPosts(function(t){var e=t.response.posts;console.log(e),$(a).empty();var o="";e.forEach(function(t){o+='<div class="post">',o+=getPostElem(t),o+=t.caption,o+="<div>",o+='<a class="link" target="_blank" href="'+t.post_url+'"></a>',o+=getLikeElem(t.id,t.reblog_key),o+='<a class="reblog" target="_blank" href="https://www.tumblr.com/reblog/'+t.id+"/"+t.reblog_key+'"></a>',o+='<div class="fb-share-button" data-href="'+t.post_url+'" data-layout="icon" data-mobile-iframe="true"></div>',o+="</div>",o+="</div>"}),$(a).append(o).children().last().trigger("posts-load")},t)}function getPosts(t,a){var e,o=API_URL+"/posts";"video"===a?o+="/video":"images"===a?o+="/photo":"gif"===a&&(e="gif"),$.ajax({type:"GET",url:o,dataType:"jsonp",data:{api_key:API_KEY,tag:e},success:function(a){t(a)}})}function getLikeElem(t,a){var e=LIKE_IFRAME_URL+"&post_id="+t+"&rk="+a,o=$(LIKE_IFRAME).attr({"class":"like",id:"like_iframe_"+t,src:e,"data-id":t});return o.prop("outerHTML")}function getPostElem(t){var a="";return"photo"===t.type?t.photos.forEach(function(t){a+='<img src="'+t.original_size.url+'">'}):"video"===t.type&&(a+='<a target="_blank" href="'+t.permalink_url+'">',a+='<img src="'+t.thumbnail_url+'">',a+="</a>"),a}